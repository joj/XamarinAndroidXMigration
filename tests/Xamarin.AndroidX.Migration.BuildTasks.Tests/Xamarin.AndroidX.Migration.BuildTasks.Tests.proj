<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<UsingTask TaskName="Xamarin.AndroidX.Migration.BuildTasks.JetifyFiles" AssemblyFile="..\..\source\Xamarin.AndroidX.Migration.BuildTasks\bin\Release\net47\Xamarin.AndroidX.Migration.BuildTasks.dll" />

	<PropertyGroup>
		<JetifierWrapperPath>..\..\source\Xamarin.AndroidX.Migration.BuildTasks\bin\Release\net47\Tools\JetifierWrapper\JetifierWrapper.jar</JetifierWrapperPath>
		<TestArtifactsRoot>..\..\externals\test-assets\facebook-sdk\</TestArtifactsRoot>
	</PropertyGroup>

	<ItemGroup>
		<FilesToJetify Include="$(TestArtifactsRoot)**\*.aar" Exclude="$(TestArtifactsRoot)**\*-jetified.aar" />
		<FilesToClean Include="$(TestArtifactsRoot)**\*-jetified.aar" />
	</ItemGroup>

	<Target Name="Build">
		<JetifyFiles JetifierWrapperPath="$(JetifierWrapperPath)" Files="@(FilesToJetify)" Verbosity="true">
			<Output TaskParameter="JetifiedFiles" ItemName="JetifiedFiles" />
		</JetifyFiles>
		<Message Text="The jetified file path is %(JetifiedFiles.Identity)" />
	</Target>

</Project>