<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<UsingTask TaskName="Xamarin.AndroidX.Migration.BuildTasks.JetifyFiles" AssemblyFile="..\..\source\Xamarin.AndroidX.Migration.BuildTasks\bin\Release\net472\Xamarin.AndroidX.Migration.BuildTasks.dll" />

	<PropertyGroup>
		<JetifierWrapperPath>..\..\source\Xamarin.AndroidX.Migration.BuildTasks\bin\Release\net472\Tools\JetifierWrapper\JetifierWrapper.jar</JetifierWrapperPath>
		<TestNativeArtifactsRoot>..\..\externals\test-assets\facebook-sdk\</TestNativeArtifactsRoot>
		<TestXamarinArtifactsRoot>..\..\externals\test-assets\xamarin-facebook-sdk\</TestXamarinArtifactsRoot>
	</PropertyGroup>

	<ItemGroup>
		<FilesToJetify Include="$(TestNativeArtifactsRoot)**\*.aar;$(TestXamarinArtifactsRoot)Xamarin.Facebook.*.Android\**\*.dll"
			       Exclude="$(TestNativeArtifactsRoot)**\*-jetified.aar;$(TestXamarinArtifactsRoot)Xamarin.Facebook.*.Android\**\*-jetified.dll" />
		<FilesToClean Include="$(TestNativeArtifactsRoot)**\*-jetified.aar;$(TestXamarinArtifactsRoot)Xamarin.Facebook.*.Android\**\*-jetified.dll" />
	</ItemGroup>

	<Target Name="Build">
		<JetifyFiles JetifierWrapperPath="$(JetifierWrapperPath)" Files="@(FilesToJetify)" Verbosity="true">
			<Output TaskParameter="JetifiedFiles" ItemName="JetifiedFiles" />
		</JetifyFiles>
		<Message Text="The jetified file path is %(JetifiedFiles.Identity)" />
	</Target>

</Project>